<!DOCTYPE html>
<html lang="en">

<head>
            <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="google-site-verification" content="g0zsBLTsA4E4l1gZ8fQL_DlYMi4nVFIY_zMUUHCvKMI">
        <title>Cài đặt và sử dụng Pi-hole để chặn quảng cáo</title>

        <!-- Bootstrap Core CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <!-- Custom CSS -->
        <!-- <link href="https://cuccode.com/theme/css/clean-blog.min.css" rel="stylesheet"> -->
        <link href="https://cuccode.com/theme/css/clean-blog.css" rel="stylesheet">

        <!-- Code highlight color scheme -->
        <link href="https://cuccode.com/theme/css/code_blocks/monokai.css" rel="stylesheet">


        <!-- Custom Fonts -->
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->



        <meta name="description" content="Pi-hole, lỗ đen quảng cáo cho ngôi nhà của bạn.">

        <meta name="author" content="dangsonbk">

        <meta name="tags" content="smarthome">
        <meta name="tags" content="home automation">

	        <meta property="og:locale" content="">
        <meta property="og:site_name" content="cuccode">

	<meta property="og:type" content="article">
            <meta property="article:author" content="https://cuccode.com/author/dangsonbk.html">
	<meta property="og:url" content="https://cuccode.com/pihole.html">
	<meta property="og:title" content="Cài đặt và sử dụng Pi-hole để chặn quảng cáo">
	<meta property="article:published_time" content="2019-06-28 21:45:00+07:00">
            <meta property="og:description" content="Pi-hole, lỗ đen quảng cáo cho ngôi nhà của bạn.">

            <meta property="og:image" content="https://cuccode.com/static/application/pi-hole.png">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@dangsonbk">
        <meta name="twitter:title" content="Cài đặt và sử dụng Pi-hole để chặn quảng cáo">

            <meta name="twitter:image" content="https://cuccode.com/static/application/pi-hole.png">

            <meta name="twitter:description" content="Pi-hole, lỗ đen quảng cáo cho ngôi nhà của bạn.">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <a class="navbar-brand" href="https://cuccode.com/"><span class="glyphicon glyphicon-home"></span> CucCode</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
            aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse " id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">

                        <li><a  class="nav-link"  href="https://cuccode.com/category/bai-dich.html">Bài dịch</a></li>
                        <li><a  class="nav-link"  href="https://cuccode.com/category/misc.html">misc</a></li>
                        <li><a  class="nav-link"  href="https://cuccode.com/category/python.html">python</a></li>
                        <li class="active"><a  class="nav-link"  href="https://cuccode.com/category/smarthome.html">smarthome</a></li>
            </ul>
        </div>
    </nav>

    <!-- Page Header -->
        <header class="intro-header" style="background-image: url('https://cuccode.com/static/application/pi-hole.png')">
    </header>
    <div class="container">
        <div class="row">
            <div class="col-lg-8  mx-auto">
                <div class="post-heading">
                    <h1>Cài đặt và sử dụng Pi-hole để chặn quảng cáo</h1>
                    
                </div>
            </div>
        </div>
        <span class="article-meta">Post by             <a href="https://cuccode.com/author/dangsonbk.html">dangsonbk</a>
 on 28-06-2019
        </span>
        <!-- Post Content -->
        <article>
            <h2>Giới thiệu</h2>
<h3>Pi-hole là gì</h3>
<p>Pi-hole là mã nguồn cho phép bạn cài đặt 1 lần duy nhất để chặn quảng cáo trên toàn bộ mạng. Thay vì cài đặt plugin trên trình duyệt của từng máy tính hay phần mềm trên từng điện thoại thì bạn có thể cài duy nhất Pi-hole để dùng chung cho tất cả các thiết bị trong mạng. Thực tế thì mình khuyên dùng Pi-hole trên toàn mạng và uBlock Origin hoặc AdBlock trên trình duyệt, lý do là Pi-hole vẫn bỏ sót kha khá quảng cáo từ Việt Nam. Với combo này thì hầu như mình không còn nhìn thấy quảng cáo khi sử dụng máy tính, xem youtube nữa.</p>
<p><strong>Một số tính năng và lợi ích của Pi-hole có thể được kể đến:</strong></p>
<ul>
<li>Miễn phí hoàn toàn! Tất cả thứ bạn cần là 1 thiết bị có thể chạy Pi-Hole, 1 con Raspberry Pi, Banana Pi, Orange Pi, 1 máy PC cũ làm home server, NAS hay thậm trí trên 1 con router đủ mạnh.</li>
<li>Không cần cài đặt phần mềm, plugin chặn quảng cáo trên từng thiết bị. Có khả năng chặn quảng cáo cho tất cả các thiết bị trong mạng, bao gồm cả những thiết bị không cho phép bạn có nhiều lựa chọn cài đặt phần mềm như Smart TV hay những thứ khó chặn như quảng cáo trong app game.</li>
<li>Giảm băng thông tiêu tốn, tăng hiệu năng hoạt động của hệ thống mạng của bạn. Do chặn từ DNS nên Pi-hole cho phép chặn quảng cáo trước cả khi nội dung quảng cáo đó được tải về.</li>
<li>Không chỉ quảng cáo, rất nhiều tên miền thu thập dữ liệu người dùng, các tên miền liên quan đến các phần mềm cài đặt trộm vào máy bạn để đào tiền ảo cũng bị pi-hole chặn.</li>
<li>Mặc định chặn hơn 100.000 tên miền liên quan đến quảng cáo, bạn có thể tùy chọn thêm hoặc bớt, hiện tại danh sách của mình có khoảng 1.400.000 tên miền.</li>
<li>Giao diện quản lý cực kỳ thân thiện.</li>
</ul>
<p><a href="https://pi-hole.net">Pi-hole</a></p>
<h3>Pi-hole hoạt động như thế nào</h3>
<p>Pi-hole hoạt động như một máy chủ DNS nội bộ tư cho mạng của bạn. Pi-hole sẽ chặn mọi truy vấn đối với các tên miền liên quan đến quảng cáo trong danh sách chặn và từ chối truy cập chúng, vì vậy quảng cáo sẽ không được tải xuống.</p>
<h3>Yêu cầu phần cứng, phần mềm</h3>
<p>Mình cài đặt pi-hole trên con Raspberry B cũ vẫn chạy rất tốt do Pi-hole không đòi hỏi cấu hình mạnh để hoạt động. Cấu hình khuyến nghị trên trang chủ chỉ yêu cầu hơn 50MB ổ lưu trữ để cài đặt và 500MB RAM. Nếu bạn sử dụng Pi-hole trên Raspberry Pi, hãy nghĩ đến việc sử dụng 1 chiếc thẻ nhớ đủ tốt. Kể cả không chạy Pi-hole thì mấy chuyện lằng nhằng với thẻ nhớ vẫn luôn làm nhiều người đau đầu khi sử dụng Raspberry Pi.</p>
<p>Về hệ điều hành để cài đặt Pi-hole, ta có các lựa chọn sau:</p>
<p>| Raspbian | Jessie / Stretch | ARM |
| Ubuntu | 16.x / 18.x | ARM / x86_64 |
| Debian | 8 / 9 | ARM / x86_64 / i386 |
| Fedora | 28 | ARM / x86_64 |
| CentOS | 7 | x86_64 |</p>
<h3>Yêu cầu khác</h3>
<p>Để cài đặt và cấu hình pi-hole hoạt động tốt trong mạng, bạn phải có quyền quản trị vào modem để trỏ dns về.</p>
<h2>Cài đặt</h2>
<blockquote>
<p>Trong bài viết này mình sẽ không nói chi tiết việc cài đặt hệ điều hành, phần mềm cho Raspberry Pi cũng như SSH vào để điều khiển như thế nào, có lẽ là một bài viết trong tương lai. Một bài viết khá chi tiết về cài đặt Raspberry Pi bạn có thể xem ở đây: <a href="https://tinhte.vn/threads/mua-raspberry-pi-ve-nghich-choi-khong-kho-nhu-ban-nghi-lam-nhieu-tro-chi-phi-chi-tam-1-5-trieu.2912506/">tinhte.vn</a></p>
</blockquote>
<p>Cài đặt pi-hole khá đơn giản, ở đây mình cài đặt pi-hole trên Raspberry pi qua SSH.</p>
<div class="highlight"><pre><span></span>curl -sSL https://install.pi-hole.net <span class="p">|</span> bash
</pre></div>


<p>Lệnh này sẽ download file bash từ địa chỉ <a href="https://install.pi-hole.net">install.pi-hole.net</a> sau đó chạy file này để thực hiện cài đặt các thư viện, phần mềm liên quan.</p>
<p>Ngoài ra bạn cũng có thể cài đặt Pi-hole từ mã nguồn theo hướng dẫn <a href="https://github.com/pi-hole/pi-hole/#alternative-install-methods">Alternative Install Methods</a></p>
<p>Tiếp sau đó bạn cần vào trang quản trị trong modem để cài đặt lại địa chỉ dns.</p>
<p><strong> Nợ ảnh (sorry) </strong></p>
<p>Và add thêm domain vào danh sách chặn.</p>
<p><strong> Nợ ảnh (sorry) </strong></p>
<p>Mặc định Pi-hole đã add sẵn danh sách khá đủ các block list, có thể tự add thêm cách danh sách khác hoặc từng domain nếu muốn. Hiện giờ mình đang dùng danh sách mặc định kèm theo:</p>
<ul>
<li><a href="https://dbl.oisd.nl/">dbl.oisd.nl</a> <a href="https://www.reddit.com/r/pihole/comments/bppug1/introducing_the/">Sponsor</a></li>
<li><a href="https://raw.githubusercontent.com/bigdargon/hostsVN/master/hosts">bigdargon</a> <a href="https://bigdargon.github.io/hostsVN/">Sponsor</a></li>
</ul>
<p>Ngoài ra, nếu muốn bạn có thể thêm các danh sách từ:</p>
<ul>
<li><a href="https://filterlists.com">filterlists.com</a></li>
<li><a href="https://firebog.net">firebog.net</a></li>
</ul>
<p><img alt="Dashboard" src="static/application/pi-hole-dashboard.png"></p>
<h2>Một vài kinh nghiệm khi dùng Pi-hole</h2>
<p>Đây là một số kinh nghiệm cá nhân của mình trong quá trình sử dụng Pi-hole:</p>
<ul>
<li>Điện thoại, thiết bị Xiaomi gửi và nhận khá nhiều request, phần lớn để spam notifications, quảng cáo, tracking (?).</li>
<li>Smart TV cũng gửi rất nhiều gói tin.</li>
<li>Trung bình khoảng 24% requests trong mạng của mình bị Pi-hole chặn lại.</li>
<li>Mình đang dùng black list ~1.4 triệu domain và thấy Raspberry Pi B vẫn chạy khá ổn, không thấy lướt web trên máy bị chậm hay Pi bị nóng.</li>
<li>Đôi khi có những website không cho phép bạn truy cập vào nội dung khi bị chặn quảng cáo, bạn có thể vào Pi-hole admin để tạm thời tắt Pi-hole trong một khoảng thời gian.</li>
</ul>
        </article>

            <div class="tags">
                <p>tags: <a href="https://cuccode.com/tag/smarthome.html">smarthome</a>, <a href="https://cuccode.com/tag/home-automation.html">home automation</a></p>
            </div>

    <hr>
    <div class="sharing">
        <!-- AddThis Button BEGIN -->
        <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
            <a class="addthis_button_preferred_1"></a>
            <a class="addthis_button_preferred_2"></a>
            <a class="addthis_button_preferred_3"></a>
            <a class="addthis_button_preferred_4"></a>
            <a class="addthis_button_preferred_5"></a>
            <a class="addthis_button_preferred_6"></a>
            <a class="addthis_button_preferred_7"></a>
            <a class="addthis_button_preferred_8"></a>
            <a class="addthis_button_preferred_9"></a>
            <a class="addthis_button_compact"></a>
            <a class="addthis_counter addthis_bubble_style"></a>
        </div>
        <script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4e43832a47612352"></script>
        <!-- AddThis Button END -->
    </div>

            <div class="comments">
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                    var disqus_shortname = 'cuccode';
                    var disqus_identifier = 'pihole.html';
                    var disqus_url = 'https://cuccode.com/pihole.html';
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = '//cuccode.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the comments.</noscript>
            </div>
    </div>
    <!-- Footer -->
    <footer class="bg-dark">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-4">
                    <p class="copyright">
                        Powered by <a href="http://getpelican.com">Pelican</a>, takes great advantage of <a href="http://python.org">Python</a> <br />
                        <a href="https://github.com/dangsonbk/pelicana-clean-blog">pelicana-clean-blog</a>, modified version of <a href="https://github.com/gilsondev/pelican-clean-blog">pelican-clean-blog</a> <br />
                        &copy;  dangsonbk
                    </p>
                </div>
                <div class="col-lg-8">
                    <ul class="list-inline text-center">
                            <li class="list-inline-item">
                                <a href="https://twitter.com/dangsonbk">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a href="https://github.com/dangsonbk">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                    </ul>
                    <ul class="list-inline text-center">
                        <a href="https://discordapp.com/invite/EeEPr6C" target="_blank"><img src="https://cuccode.com/theme/images/discord.png"></a>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

        <!-- Custom Theme JavaScript -->
        <script src="https://cuccode.com/theme/js/clean-blog.min.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-105160643-1', 'auto');
      ga('send', 'pageview');

    </script>
<script type="text/javascript">
    var disqus_shortname = 'cuccode';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<script>
    window.EMOJICOM_WIDGET = {
        campaign: "SmhS1wCdwJv2YJ6nosAV"
    };
</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

</body>

</html>